# Feature #002: キャンバス上のウィジェットを一括削除する機能

**ステータス**: 🔴 未着手
**優先度**: Medium
**担当**: 未割当
**見積もり時間**: 2-4時間
**実績時間**: -
**作成日**: 2025-10-22
**完了日**: -

## 📋 機能概要

キャンバス上に配置されているすべてのウィジェットを一括で削除できる機能を追加する。

## 🎯 目的・背景

バグ修正作業中に、キャンバス上のウィジェットを一つずつ削除する必要があり、効率が悪いと感じた。特にテストやデバッグ時に、複数のウィジェットを素早くクリアして最初からやり直したい場合に有用。

## 👥 対象ユーザー

- NoCode UI Builderを使用してUIを構築するすべてのユーザー
- 特にテストやデバッグを頻繁に行う開発者

## ✨ 主要機能

1. キャンバス上のすべてのウィジェットを一括削除するボタンまたはメニュー項目
2. 削除前に確認ダイアログを表示（誤操作防止）
3. 削除操作は元に戻せるようにする（Undo機能との連携）

## 📐 技術仕様

### UI/UXデザイン

- ツールバーまたはキャンバスのコンテキストメニューに「すべてクリア」ボタンを配置
- クリック時に確認ダイアログを表示
  - メッセージ: "キャンバス上のすべてのウィジェットを削除しますか？この操作は元に戻せます。"
  - ボタン: "キャンセル" / "削除"

### 実装方針

- 既存の`widgets`状態を空配列にセット
- `selectedWidgetId`もクリア
- 削除操作は履歴に記録（Undo/Redo機能がある場合）

```typescript
// 例: 実装イメージ
const handleClearAllWidgets = () => {
  if (confirm("キャンバス上のすべてのウィジェットを削除しますか？この操作は元に戻せます。")) {
    setWidgets([]);
    setSelectedWidgetId(null);
  }
};
```

## ✅ 実装タスク

- [ ] UIにクリアボタンを追加（ツールバーまたはメニュー）
- [ ] 確認ダイアログの実装
- [ ] 一括削除ロジックの実装
- [ ] Undo/Redo機能との連携（既存の場合）
- [ ] テスト実装
- [ ] ドキュメント更新

## 📦 成果物

- [ ] `src/app/builder/page.tsx` - クリアボタンの追加
- [ ] `src/components/builder/*` - 必要に応じてコンポーネント修正
- [ ] テストケース

## 🧪 テスト計画

### 手動テスト
- [ ] クリアボタンが表示されることを確認
- [ ] クリアボタンクリック時に確認ダイアログが表示されることを確認
- [ ] 「キャンセル」を選択した場合、ウィジェットが削除されないことを確認
- [ ] 「削除」を選択した場合、すべてのウィジェットが削除されることを確認
- [ ] ウィジェットが0個の状態でクリアボタンを押しても問題ないことを確認
- [ ] 削除後にプロパティパネルが適切に更新されることを確認

### 統合テスト
- [ ] Undo機能がある場合、削除操作を元に戻せることを確認
- [ ] 削除後に新しいウィジェットを追加できることを確認

## 📊 完了条件

- [ ] すべてのウィジェットを一括削除できる
- [ ] 確認ダイアログが正しく表示される
- [ ] 誤操作を防ぐ仕組みが実装されている
- [ ] すべてのテスト項目がパス
- [ ] コードレビュー完了

## 🔗 依存関係

- 依存する機能: なし
- ブロックしている機能: なし

## 📝 メモ

チケット作成日: 2025-10-22
作成理由: bug-003の修正作業中に必要性を感じたため

## 🔗 関連

- 関連Issue: -
- 関連PR: -
- 参考: bug-003の修正作業中に要望として発生
