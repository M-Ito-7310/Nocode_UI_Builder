# Enhancement #005: 共通ヘッダーコンポーネントの導入

**ステータス**: 🔴 未着手
**優先度**: Medium
**カテゴリ**: Refactoring
**担当**: 未割当
**見積もり時間**: 1-2時間
**実績時間**: -
**作成日**: 2025-10-22
**完了日**: -

## 📋 改善概要

現在、フッターは共通コンポーネント化されているが、ヘッダーが各ページで個別に実装されている。builder以外のページで共通ヘッダーコンポーネントを使用するように改善し、コードの保守性と一貫性を向上させる。

## 🎯 目的・背景

### 現状の課題
- フッターは既に共通コンポーネント化されており、全ページで再利用されている
- ヘッダーは各ページで個別に実装されているため、変更時に複数箇所の修正が必要
- builder以外のページ（contact, privacy, termsなど）は同じヘッダー仕様を持つべき
- コードの重複により保守性が低下している

### 改善の必要性
- ヘッダーのデザインや機能を変更する際、複数ファイルの修正が必要
- コードの一貫性が欠如し、バグの原因になりやすい
- フッターと同様に共通化することで、保守性と開発効率が向上する

## 📊 現状の問題点

### 個別実装されているページ
- `src/app/page.tsx` (トップページ)
- `src/app/contact/page.tsx` (お問い合わせページ)
- `src/app/privacy/page.tsx` (プライバシーポリシーページ)
- `src/app/terms/page.tsx` (利用規約ページ)

### 固有実装を維持するページ
- `src/app/builder/page.tsx` (ビルダーページ - 固有のヘッダーが必要)

## ✨ 改善後の期待値

### コード品質の向上
- ヘッダーコンポーネントが1箇所に集約される
- 変更時の修正箇所が1ファイルのみになる
- コードの重複が削減される

### 保守性の向上
- ヘッダーのデザイン変更が容易になる
- バグ修正が1箇所で完結する
- 新しいページ追加時、共通ヘッダーをimportするだけで済む

### 一貫性の確保
- 全ページで同じヘッダーUIが保証される
- フッターと同様のアーキテクチャパターンで統一される

## 🔧 改善方法

### アプローチ1: 既存ヘッダーコードを共通コンポーネント化
1. 既存ページのヘッダーコードを分析
2. `src/components/Header.tsx` として共通コンポーネントを作成
3. 各ページで共通ヘッダーをimportして使用

### アプローチ2: 共通レイアウトコンポーネントを作成
1. `src/components/Layout.tsx` を作成し、ヘッダー・フッターを含む
2. 各ページでレイアウトコンポーネントを使用
3. より包括的なレイアウト管理を実現

### 選択したアプローチ
**アプローチ1を選択**

理由：
- フッターと同じパターンで統一できる
- 段階的な移行が可能
- 既存コードへの影響が最小限
- builder用の固有ヘッダーとの共存が容易

## ✅ 実装タスク

- [ ] 既存ページのヘッダーコードを調査・比較
- [ ] `src/components/Header.tsx` を作成
- [ ] トップページ (`src/app/page.tsx`) でHeaderコンポーネントを使用
- [ ] お問い合わせページ (`src/app/contact/page.tsx`) でHeaderコンポーネントを使用
- [ ] プライバシーポリシーページ (`src/app/privacy/page.tsx`) でHeaderコンポーネントを使用
- [ ] 利用規約ページ (`src/app/terms/page.tsx`) でHeaderコンポーネントを使用
- [ ] 既存の個別実装されたヘッダーコードを削除
- [ ] 全ページでヘッダーの表示・動作が正しいことを確認

## 📦 変更対象ファイル

- [ ] `src/components/Header.tsx` - 新規作成（共通ヘッダーコンポーネント）
- [ ] `src/app/page.tsx` - ヘッダー部分を共通コンポーネントに置き換え
- [ ] `src/app/contact/page.tsx` - ヘッダー部分を共通コンポーネントに置き換え
- [ ] `src/app/privacy/page.tsx` - ヘッダー部分を共通コンポーネントに置き換え
- [ ] `src/app/terms/page.tsx` - ヘッダー部分を共通コンポーネントに置き換え

## 🧪 テスト計画

### 既存機能の回帰テスト
- [ ] トップページのヘッダー表示確認
- [ ] お問い合わせページのヘッダー表示確認
- [ ] プライバシーポリシーページのヘッダー表示確認
- [ ] 利用規約ページのヘッダー表示確認
- [ ] builderページのヘッダーが固有実装のまま動作することを確認
- [ ] ヘッダー内のナビゲーションリンクが正常に動作することを確認
- [ ] レスポンシブデザインでヘッダーが適切に表示されることを確認

### ビフォー・アフター比較
| 指標 | Before | After | 改善率 |
|------|--------|-------|--------|
| ヘッダー実装箇所 | 4ファイル | 1ファイル | -75% |
| コード重複行数 | 約200行 | 0行 | -100% |
| 変更時の修正ファイル数 | 4ファイル | 1ファイル | -75% |

## ⚠️ リスクと影響範囲

- リスク1: 既存ページのヘッダー構造が微妙に異なる可能性 → 実装前に全ページのヘッダーコードを詳細に比較し、差異を把握する
- リスク2: スタイリングの崩れ → 各ページでビジュアル回帰テストを実施
- リスク3: builderページへの誤った適用 → builderは対象外として明確に分離する

## 📊 完了条件

- [ ] 全実装タスク完了
- [ ] 既存機能に影響がないことを確認
- [ ] 全ページでヘッダーが正しく表示されることを確認
- [ ] コードレビュー完了
- [ ] テスト完了
- [ ] 個別実装されていたヘッダーコードが削除されている

## 📝 メモ

チケット作成日: 2025-10-22

### 実装時の注意点
- builderページは固有ヘッダーを維持すること
- フッターコンポーネント (`src/components/Footer.tsx`) の実装パターンを参考にする
- 既存のヘッダーデザインを完全に再現すること
- 全ページで同じナビゲーション項目が表示されることを確認

## 🔗 関連

- 関連Issue: -
- 関連PR: -
- 参考資料: `src/components/Footer.tsx` (共通フッターコンポーネントの実装例)
